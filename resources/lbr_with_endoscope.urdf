<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from lbr_storz_endoscope.urdf.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<!-- Here we define the robot, we named it "lbr_storz_endoscope" -->
<robot name="lbr_storz_endoscope">
  <material name="orange">
    <color rgba="1.0 0.42 0.04 1.0"/>
  </material>
  <material name="white">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>
  <material name="silver">
    <color rgba="0.7 0.7 0.7 1.0"/>
  </material>
  <!-- fix to world -->
  <link name="world"/>
  <!--joint between {parent} and link_0-->
  <joint name="world_lbr_joint" type="fixed">
    <parent link="world"/>
    <child link="lbr_link_0"/>
  </joint>
  <link name="lbr_link_0">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.0018958727522859222 -8.736009549202623e-09 0.07626305487275586"/>
      <mass value="7.143078"/>
      <inertia ixx="0.038693" ixy="-0.000000" ixz="-0.000686" iyy="0.039461" iyz="-0.000000" izz="0.054387"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/visual/link_0.stl"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/collision/link_0.stl"/>
      </geometry>
    </collision>
  </link>
  <joint name="lbr_joint_0" type="revolute">
    <origin rpy="0 0 0" xyz="0.0 0.0 0.1475"/>
    <parent link="lbr_link_0"/>
    <child link="lbr_link_1"/>
    <axis xyz="0.0 0.0 1.0"/>
    <limit effort="100" lower="-2.9670597283903604" upper="2.9670597283903604" velocity="10"/>
    <dynamics damping="10.0" friction="0.1"/>
  </joint>
  <link name="lbr_link_1">
    <inertial>
      <origin rpy="0 0 0" xyz="5.010328793588479e-08 -0.03481903813472808 0.12329857163085542"/>
      <mass value="3.271492"/>
      <inertia ixx="0.020611" ixy="-0.000000" ixz="0.000000" iyy="0.019667" iyz="0.003660" izz="0.007290"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.0 0.0 -0.1475"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/visual/link_1.stl"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="-0.0 0.0 -0.1475"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/collision/link_1.stl"/>
      </geometry>
    </collision>
  </link>
  <joint name="lbr_joint_1" type="revolute">
    <origin rpy="0 0 0" xyz="-0.0 -0.0105 0.1925"/>
    <parent link="lbr_link_1"/>
    <child link="lbr_link_2"/>
    <axis xyz="0.0 1.0 0.0"/>
    <limit effort="100" lower="-2.0943951023931953" upper="2.0943951023931953" velocity="10"/>
    <dynamics damping="10.0" friction="0.1"/>
  </joint>
  <link name="lbr_link_2">
    <inertial>
      <origin rpy="0 0 0" xyz="2.958275959973659e-08 0.03979295468456965 0.08694361150855662"/>
      <mass value="3.886440"/>
      <inertia ixx="0.030552" ixy="-0.000000" ixz="0.000000" iyy="0.028995" iyz="0.005676" izz="0.009317"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.0 0.0105 -0.34"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/visual/link_2.stl"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.0 0.0105 -0.34"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/collision/link_2.stl"/>
      </geometry>
    </collision>
  </link>
  <joint name="lbr_joint_2" type="revolute">
    <origin rpy="0 0 0" xyz="0.0 0.0105 0.2075"/>
    <parent link="lbr_link_2"/>
    <child link="lbr_link_3"/>
    <axis xyz="0.0 0.0 1.0"/>
    <limit effort="100" lower="-2.9670597283903604" upper="2.9670597283903604" velocity="10"/>
    <dynamics damping="10.0" friction="0.1"/>
  </joint>
  <link name="lbr_link_3">
    <inertial>
      <origin rpy="0 0 0" xyz="-5.010330962930412e-08 0.03481903813473644 0.1232985716309013"/>
      <mass value="3.271492"/>
      <inertia ixx="0.020611" ixy="-0.000000" ixz="-0.000000" iyy="0.019667" iyz="-0.003660" izz="0.007290"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.0 -0.0 -0.5475"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/visual/link_3.stl"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.0 -0.0 -0.5475"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/collision/link_3.stl"/>
      </geometry>
    </collision>
  </link>
  <joint name="lbr_joint_3" type="revolute">
    <origin rpy="0 0 0" xyz="0.0 0.0105 0.1925"/>
    <parent link="lbr_link_3"/>
    <child link="lbr_link_4"/>
    <axis xyz="0.0 -1.0 0.0"/>
    <limit effort="100" lower="-2.0943951023931953" upper="2.0943951023931953" velocity="10"/>
    <dynamics damping="10.0" friction="0.1"/>
  </joint>
  <link name="lbr_link_4">
    <inertial>
      <origin rpy="0 0 0" xyz="-3.025230048709993e-08 -0.03979329512443697 0.08694363375610437"/>
      <mass value="3.886439"/>
      <inertia ixx="0.030551" ixy="-0.000000" ixz="-0.000000" iyy="0.028993" iyz="-0.005676" izz="0.009316"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.0 -0.0105 -0.74"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/visual/link_4.stl"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="-0.0 -0.0105 -0.74"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/collision/link_4.stl"/>
      </geometry>
    </collision>
  </link>
  <joint name="lbr_joint_4" type="revolute">
    <origin rpy="0 0 0" xyz="-0.0 -0.0105 0.2075"/>
    <parent link="lbr_link_4"/>
    <child link="lbr_link_5"/>
    <axis xyz="0.0 0.0 1.0"/>
    <limit effort="100" lower="-2.9670597283903604" upper="2.9670597283903604" velocity="10"/>
    <dynamics damping="10.0" friction="0.1"/>
  </joint>
  <link name="lbr_link_5">
    <inertial>
      <origin rpy="0 0 0" xyz="3.887174133882675e-08 -0.02982428408876193 0.07626701716135398"/>
      <mass value="1.474035"/>
      <inertia ixx="0.008179" ixy="0.000000" ixz="-0.000000" iyy="0.006879" iyz="0.002704" izz="0.003709"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.0 0.0 -0.9475"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/visual/link_5.stl"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.0 0.0 -0.9475"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/collision/link_5.stl"/>
      </geometry>
    </collision>
  </link>
  <joint name="lbr_joint_5" type="revolute">
    <origin rpy="0 0 0" xyz="0.0 -0.0707 0.1925"/>
    <parent link="lbr_link_5"/>
    <child link="lbr_link_6"/>
    <axis xyz="0.0 1.0 0.0"/>
    <limit effort="100" lower="-2.0943951023931953" upper="2.0943951023931953" velocity="10"/>
    <dynamics damping="10.0" friction="0.1"/>
  </joint>
  <link name="lbr_link_6">
    <inertial>
      <origin rpy="0 0 0" xyz="-7.073221144775636e-07 0.07101990943401648 0.004952526180360017"/>
      <mass value="2.316917"/>
      <inertia ixx="0.006813" ixy="-0.000000" ixz="0.000000" iyy="0.006559" iyz="0.000300" izz="0.004462"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.0 0.0707 -1.14"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/visual/link_6.stl"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.0 0.0707 -1.14"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/collision/link_6.stl"/>
      </geometry>
    </collision>
  </link>
  <joint name="lbr_joint_6" type="revolute">
    <origin rpy="0 0 0" xyz="0.0 0.0707 0.091"/>
    <parent link="lbr_link_6"/>
    <child link="lbr_link_7"/>
    <axis xyz="0.0 0.0 1.0"/>
    <limit effort="100" lower="-3.0543261909900763" upper="3.0543261909900763" velocity="10"/>
    <dynamics damping="10.0" friction="0.1"/>
  </joint>
  <link name="lbr_link_7">
    <inertial>
      <origin rpy="0 0 0" xyz="3.1218274599808524e-06 -1.6358155634513969e-06 0.013782295521067356"/>
      <mass value="0.250107"/>
      <inertia ixx="0.000165" ixy="0.000000" ixz="-0.000000" iyy="0.000165" iyz="0.000000" izz="0.000288"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.0 -0.0 -1.231"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/visual/link_7.stl"/>
      </geometry>
      <material name="silver"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="-0.0 -0.0 -1.231"/>
      <geometry>
        <mesh filename="lbr_description/meshes/med7/collision/link_7.stl"/>
      </geometry>
    </collision>
  </link>
  <joint name="lbr_joint_ee" type="fixed">
    <parent link="lbr_link_7"/>
    <child link="lbr_link_ee"/>
    <origin rpy="0 0 0" xyz="0 0 0.035"/>
  </joint>
  <link name="lbr_link_ee">
        </link>
  <!-- ros_control-plugin -->
  <gazebo>
    <plugin filename="libgazebo_ros2_control.so" name="gazebo_ros2_control">
      <parameters>/home/cm22/ros/lbr_with_tools_ws/install/lbr_bringup/share/lbr_bringup/config/lbr_controllers.yml</parameters>
      <robotNamespace>/lbr</robotNamespace>
    </plugin>
  </gazebo>
  <!-- link 0 -->
  <gazebo reference="lbr_link_0">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <material>Gazebo/White</material>
  </gazebo>
  <!-- link 1 -->
  <gazebo reference="lbr_link_1">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <material>Gazebo/White</material>
  </gazebo>
  <!-- link 2 -->
  <gazebo reference="lbr_link_2">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <material>Gazebo/White</material>
  </gazebo>
  <!-- link 3 -->
  <gazebo reference="lbr_link_3">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <material>Gazebo/White</material>
  </gazebo>
  <!-- link 4 -->
  <gazebo reference="lbr_link_4">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <material>Gazebo/White</material>
  </gazebo>
  <!-- link 5 -->
  <gazebo reference="lbr_link_5">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <material>Gazebo/White</material>
  </gazebo>
  <!-- link 6 -->
  <gazebo reference="lbr_link_6">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <material>Gazebo/White</material>
  </gazebo>
  <!-- link 7 -->
  <gazebo reference="lbr_link_7">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <material>Gazebo/Grey</material>
  </gazebo>
  <!-- arg for control mode -->
  <ros2_control name="lbr_hardware_interface" type="system">
    <hardware>
      <plugin>gazebo_ros2_control/GazeboSystem</plugin>
    </hardware>
    <!-- define joints and command/state interfaces for each joint -->
    <joint name="lbr_joint_0">
      <command_interface name="position">
        <!-- better to use radians as min max first -->
        <param name="min">-1</param>
        <param name="max"> 1</param>
      </command_interface>
      <command_interface name="effort">
        <param name="min">-1</param>
        <param name="max"> 1</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="effort"/>
    </joint>
    <joint name="lbr_joint_1">
      <command_interface name="position">
        <param name="min">-1</param>
        <param name="max"> 1</param>
      </command_interface>
      <command_interface name="effort">
        <param name="min">-1</param>
        <param name="max"> 1</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="effort"/>
    </joint>
    <joint name="lbr_joint_2">
      <command_interface name="position">
        <param name="min">-1</param>
        <param name="max"> 1</param>
      </command_interface>
      <command_interface name="effort">
        <param name="min">-1</param>
        <param name="max"> 1</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="effort"/>
    </joint>
    <joint name="lbr_joint_3">
      <command_interface name="position">
        <param name="min">-1</param>
        <param name="max"> 1</param>
      </command_interface>
      <command_interface name="effort">
        <param name="min">-1</param>
        <param name="max"> 1</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="effort"/>
    </joint>
    <joint name="lbr_joint_4">
      <command_interface name="position">
        <param name="min">-1</param>
        <param name="max"> 1</param>
      </command_interface>
      <command_interface name="effort">
        <param name="min">-1</param>
        <param name="max"> 1</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="effort"/>
    </joint>
    <joint name="lbr_joint_5">
      <command_interface name="position">
        <param name="min">-1</param>
        <param name="max"> 1</param>
      </command_interface>
      <command_interface name="effort">
        <param name="min">-1</param>
        <param name="max"> 1</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="effort"/>
    </joint>
    <joint name="lbr_joint_6">
      <command_interface name="position">
        <param name="min">-1</param>
        <param name="max"> 1</param>
      </command_interface>
      <command_interface name="effort">
        <param name="min">-1</param>
        <param name="max"> 1</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="effort"/>
    </joint>
  </ros2_control>
  <!--joint between {parent} and link_0-->
  <joint name="lbr_link_ee_storz_endoscope_joint" type="fixed">
    <parent link="lbr_link_ee"/>
    <child link="storz_endoscope_link_0"/>
    <origin rpy="0 0 1.57079632679" xyz="0 0 0"/>
  </joint>
  <!-- link 0 -->
  <link name="storz_endoscope_link_0">
    <inertial>
      <origin rpy="0 0 0" xyz="0.05347530282631193 -0.0009866876037994033 0.03417463143575086"/>
      <mass value="1.5884453511086485"/>
      <inertia ixx="0.000641" ixy="9.6e-05" ixz="-0.000622" iyy="0.004145" iyz="1.2e-05" izz="0.003991"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="storz_endoscope_description/meshes/visual/link_0.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="white">
        <color rgba="1.0 1.0 1.0 1.0"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="storz_endoscope_description/meshes/collision/link_0.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <joint name="storz_endoscope_joint_1" type="fixed">
    <origin rpy="0 0 0" xyz="-0.015 0.0 0.0415"/>
    <parent link="storz_endoscope_link_0"/>
    <child link="storz_endoscope_link_1"/>
  </joint>
  <!-- link 1 -->
  <link name="storz_endoscope_link_1">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.08761286703720295 1.6070339520327724e-16 2.081251837537934e-13"/>
      <mass value="0.017299976665697662"/>
      <inertia ixx="0.0" ixy="-0.0" ixz="-0.0" iyy="4.4e-05" iyz="-0.0" izz="4.4e-05"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.015 -0.0 -0.0415"/>
      <geometry>
        <mesh filename="storz_endoscope_description/meshes/visual/link_1.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="white">
        <color rgba="1.0 1.0 1.0 1.0"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.015 -0.0 -0.0415"/>
      <geometry>
        <mesh filename="storz_endoscope_description/meshes/collision/link_1.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <joint name="storz_endoscope_joint_cm" type="fixed">
    <origin rpy="1.57079632679 0 3.141592654" xyz="-0.1753 0.0 0.0"/>
    <parent link="storz_endoscope_link_1"/>
    <child link="storz_endoscope_link_cm"/>
  </joint>
  <!-- camera link -->
  <link name="storz_endoscope_link_cm"/>
  <!-- optical frame https://answers.ros.org/question/232534/gazebo-camera-frame-is-inconsistent-with-rviz-opencv-convention/ -->
  <joint name="storz_endoscope_joint_cm_optical" type="fixed">
    <!-- add continuous joint to rotate image digitally -->
    <parent link="storz_endoscope_link_cm"/>
    <child link="storz_endoscope_link_cm_optical"/>
    <origin rpy="-1.57079632679 0 -1.57079632679" xyz="0 0 0"/>
    <!--axis xyz="0.0 0.0 0.01"/-->
    <!-- rotate about the optical axis -->
  </joint>
  <link name="storz_endoscope_link_cm_optical">
        </link>
  <!-- link 0 -->
  <gazebo reference="storz_endoscope_link_0">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <material>Gazebo/Grey</material>
    <gravity>0</gravity>
  </gazebo>
  <!-- link 1 -->
  <gazebo reference="storz_endoscope_link_1">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <material>Gazebo/Grey</material>
    <gravity>0</gravity>
  </gazebo>
  <!-- camera -->
  <gazebo reference="storz_endoscope_link_cm">
    <sensor name="storz_endoscope_camera" type="camera">
      <update_rate>30.0</update_rate>
      <camera name="head">
        <horizontal_fov>1.3962634</horizontal_fov>
        <image>
          <width>320</width>
          <height>240</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.02</near>
          <far>300</far>
        </clip>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="camera_controller">
        <alwaysOn>true</alwaysOn>
        <updateRate>0.0</updateRate>
        <robotNamespace>/lbr</robotNamespace>
        <cameraName>storz_endoscope_camera</cameraName>
        <imageTopicName>image_raw</imageTopicName>
        <cameraInfoTopicName>camera_info</cameraInfoTopicName>
        <frameName>storz_endoscope_link_cm_optical</frameName>
        <hackBaseline>0.07</hackBaseline>
        <distortionK1>0.0</distortionK1>
        <distortionK2>0.0</distortionK2>
        <distortionK3>0.0</distortionK3>
        <distortionT1>0.0</distortionT1>
        <distortionT2>0.0</distortionT2>
      </plugin>
    </sensor>
    <gravity>0</gravity>
  </gazebo>
</robot>
